import{r as i,j as e,S as D}from"./app-CMKydbov.js";import _ from"./EditDialog-Cym3dlfP.js";import{P as y,I as E}from"./InputDialog-zUmt0i4I.js";import T from"./Commenter-DFv039ff.js";import{c as o}from"./createLucideIcon-BRC5lge9.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],M=o("CircleCheck",S);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],L=o("Pen",$);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],V=o("Trash2",P);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],g=o("X",A);function B({value:n,tasks:b,loggedInUser:a,selectedUser:l,users:N,errors:k,comments:R}){var p;const[c,d]=i.useState(!1),[x,m]=i.useState(null),[t,h]=i.useState(null),[f,w]=i.useState(!1);i.useEffect(()=>{const s=()=>{w(window.innerWidth<768)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const r=b.filter(s=>s.selected_date===n);i.useEffect(()=>{r.length>0?h(r[0]):h(null)},[n,b]);const j=()=>{a===l&&(d(!0),m(null))},v=s=>{a===l&&(m(s),d(!1))},u=()=>{d(!1),m(null)},C=()=>{confirm("Are you sure you want to delete this task?")&&D.delete(route("task.delete",t.id))};return e.jsxs("div",{className:"flex flex-col md:flex-row h-full",children:[e.jsxs("div",{className:`${f&&(c||x)?"hidden":"block"} w-full md:w-1/3 bg-blue-800 text-white p-4 rounded-t-lg md:rounded-l-lg md:rounded-tr-none`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Tasks for ",n]}),a===l&&e.jsx("button",{onClick:j,className:"p-2 bg-blue-700 hover:bg-blue-600 rounded-full transition-colors","aria-label":"Add new task",children:e.jsx(y,{size:18})})]}),e.jsx("ul",{className:"space-y-2 max-h-[300px] md:max-h-[400px] overflow-y-auto",children:r.length>0?r.map((s,z)=>e.jsx("li",{children:e.jsx("button",{onClick:()=>h(s),className:`w-full text-left p-3 rounded-lg transition-colors ${(t==null?void 0:t.id)===s.id?"bg-blue-600 border border-white border-2":"bg-blue-600 hover:bg-blue-600"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{children:["Task ",r.length-z,":"," ",s.task_name]}),s.status===1&&e.jsx("span",{className:"text-xs bg-green-500 text-white px-2 py-1 rounded-full",children:"Done"})]})})},s.id)):e.jsx("li",{className:"text-center py-4 text-blue-200",children:"No tasks for this date"})})]}),e.jsx("div",{className:`${f&&(c||x)?"block":"display"} md:block flex-1 bg-white p-6 rounded-b-lg md:rounded-r-lg md:rounded-bl-none overflow-y-auto`,children:c?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Create New Task"}),e.jsx("button",{onClick:u,className:"text-gray-500 hover:text-gray-700","aria-label":"Close dialog",children:e.jsx(g,{size:20})})]}),e.jsx(E,{value:n,errors:k})]}):x?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Edit Task"}),e.jsx("button",{onClick:u,className:"text-gray-500 hover:text-gray-700","aria-label":"Close dialog",children:e.jsx(g,{size:20})})]}),e.jsx(_,{selectedTask:t,onClose:u})]}):t?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-500",children:[(p=N.find(s=>s.id===l))==null?void 0:p.name," ","â€¢ ",n]})}),e.jsxs("div",{className:"bg-blue-50 px-4 py-2.5 space-y-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:t.task_name}),t.status===1&&e.jsx("div",{className:"flex",children:e.jsx(M,{color:"white",fill:"#00ff1e",size:24})})]}),e.jsx("p",{className:"text-gray-600 whitespace-pre-line",children:t.task_description||"No description provided"}),a===l&&e.jsxs("div",{className:"flex flex-wrap gap-2 pt-4 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>v(t.id),className:"flex text-sm items-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(L,{size:12,className:"mr-1"}),"Edit Task"]}),e.jsxs("button",{onClick:C,className:"flex text-sm items-center px-3 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors",children:[e.jsx(V,{size:12,className:"mr-1"}),"Delete Task"]})]})]}),e.jsx("hr",{}),e.jsx("div",{className:"mt-8",children:t&&e.jsx(T,{initialComments:t.comments||[],loggedInUser:a,selectedUser:l,taskId:t.id})})]}):a===l?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(y,{className:"text-blue-600",size:24})}),e.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"No task selected"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Select a task from the list or create a new one"}),e.jsx("button",{onClick:j,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create New Task"})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"No tasks available"}),e.jsx("p",{className:"text-gray-500",children:"This user has no tasks for this date"})]})})]})}export{B as default};
